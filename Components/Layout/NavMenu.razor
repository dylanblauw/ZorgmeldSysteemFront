@rendermode InteractiveServer

<div class="top-row-edit ps-3 navbar navbar-dark">
    <div class="container-fluid">
        <a class="navbar-brand" href="">
            <img src="/Img/Fixility.png" alt="Fixility" class="navbar-logo" />
        </a>
    </div>
</div>

<input type="checkbox" title="Navigation menu" class="navbar-toggler" />

<div class="nav-scrollable">
    <nav class="flex-column">
        <!-- Home -->
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                <span class="bi-house-door-fill" aria-hidden="true"></span> Home
            </NavLink>
        </div>

        <!-- Tickets Section -->
        <div class="nav-item px-3 mt-3">
            <div class="nav-link text-white fw-bold collapsible-header" @onclick="() => ToggleSection(1)" @onclick:stopPropagation="true">
                <span class="bi-ticket-perforated-fill me-2" aria-hidden="true"></span>
                Tickets&nbsp;
                <span class="@(expandedSections.Contains(1) ? "bi-chevron-up" : "bi-chevron-down") float-end"></span>
            </div>
        </div>
        @if (expandedSections.Contains(1))
        {
            <div class="submenu">
                <div class="nav-item px-3 ps-5">
                    <NavLink class="nav-link" href="ticket/create">
                        <span class="bi-plus-circle" aria-hidden="true"></span> Nieuw Ticket
                    </NavLink>
                </div>
                <div class="nav-item px-3 ps-5">
                    <NavLink class="nav-link" href="ticket">
                        <!--                     ^^^^^^ AANGEPAST: was "tickets" -->
                        <span class="bi-list-ul" aria-hidden="true"></span> Alle Tickets
                    </NavLink>
                </div>
            </div>
        }

        <!-- Monteurs Section -->
        <div class="nav-item px-3 mt-3">
            <div class="nav-link text-white fw-bold collapsible-header" @onclick="() => ToggleSection(2)" @onclick:stopPropagation="true">
                <span class="bi-person-gear me-2" aria-hidden="true"></span>
                Monteurs&nbsp;
                <span class="@(expandedSections.Contains(2) ? "bi-chevron-up" : "bi-chevron-down") float-end"></span>
            </div>
        </div>
        @if (expandedSections.Contains(2))
        {
            <div class="submenu">
                <div class="nav-item px-3 ps-5">
                    <NavLink class="nav-link" href="mechanic/create">
                        <span class="bi-plus-circle" aria-hidden="true"></span> Nieuwe Monteur
                    </NavLink>
                </div>
                <div class="nav-item px-3 ps-5">
                    <NavLink class="nav-link" href="mechanic">
                        <!--                     ^^^^^^^^ AANGEPAST: was "mechanics" -->
                        <span class="bi-list-ul" aria-hidden="true"></span> Alle Monteurs
                    </NavLink>
                </div>
            </div>
        }

        <!-- Bedrijven Section -->
        <div class="nav-item px-3 mt-3">
            <div class="nav-link text-white fw-bold collapsible-header" @onclick="() => ToggleSection(3)" @onclick:stopPropagation="true">
                <span class="bi-building-fill me-2" aria-hidden="true"></span>
                Bedrijven&nbsp;
                <span class="@(expandedSections.Contains(3) ? "bi-chevron-up" : "bi-chevron-down") float-end"></span>
            </div>
        </div>
        @if (expandedSections.Contains(3))
        {
            <div class="submenu">
                <div class="nav-item px-3 ps-5">
                    <NavLink class="nav-link" href="company/create">
                        <span class="bi-plus-circle" aria-hidden="true"></span> Nieuw Bedrijf
                    </NavLink>
                </div>
                <div class="nav-item px-3 ps-5">
                    <NavLink class="nav-link" href="company">
                        <!--                     ^^^^^^^ AANGEPAST: was "companies" -->
                        <span class="bi-list-ul" aria-hidden="true"></span> Alle Bedrijven
                    </NavLink>
                </div>
            </div>
        }

        <!-- Objecten Section -->
        <div class="nav-item px-3 mt-3">
            <div class="nav-link text-white fw-bold collapsible-header" @onclick="() => ToggleSection(4)" @onclick:stopPropagation="true">
                <span class="bi-box-seam-fill me-2" aria-hidden="true"></span>
                Objecten&nbsp;
                <span class="@(expandedSections.Contains(4) ? "bi-chevron-up" : "bi-chevron-down") float-end"></span>
            </div>
        </div>
        @if (expandedSections.Contains(4))
        {
            <div class="submenu">
                <div class="nav-item px-3 ps-5">
                    <NavLink class="nav-link" href="object/create">
                        <span class="bi-plus-circle" aria-hidden="true"></span> Nieuw Object
                    </NavLink>
                </div>
                <div class="nav-item px-3 ps-5">
                    <NavLink class="nav-link" href="object">
                        <!--                     ^^^^^^ AANGEPAST: was "objects" -->
                        <span class="bi-list-ul" aria-hidden="true"></span> Alle Objecten
                    </NavLink>
                </div>
            </div>
        }
    </nav>
</div>

@code {
    private HashSet<int> expandedSections = new HashSet<int>();

    private void ToggleSection(int sectionId)
    {
        if (expandedSections.Contains(sectionId))
        {
            expandedSections.Remove(sectionId);
        }
        else
        {
            expandedSections.Add(sectionId);
        }

        StateHasChanged();
    }
}